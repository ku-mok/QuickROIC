(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{363:function(e,n,t){},374:function(e,n,t){"use strict";t.r(n);var a,i,c,r,o=t(0),s=t.n(o),l=t(65),d=t.n(l),u=t(224),m=t(25),j=t(31),b=t(362),x=t(440),O=t(221),p=Object(O.a)({}),f=t(446),h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=Object(m.f)(),t=Object(o.useMemo)((function(){return[{label:"Home",onClick:function(){return n.push("/")}},{label:"\u65b0\u898f\u5206\u6790",onClick:function(){return n.push("/new")}},{label:"\u30c7\u30fc\u30bf\u78ba\u8a8d",onClick:function(){return n.push("/table")},disabled:!e},{label:"ROIC-WACC\u30b0\u30e9\u30d5",onClick:function(){return n.push("/scatter")},disabled:!e},{label:"ROIC\u30c4\u30ea\u30fc",onClick:function(){return n.push("/tree")},disabled:!e},{label:"\u8868\u793a\u8a2d\u5b9a",onClick:function(){return n.push("/setting")},disabled:!e}]}),[n,e]);return t},v=t(29),k=t(443),y=t(445),g=t(444),N=t(427),C=t(447),S=t(1),w=function(e){var n=Object(m.f)();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(k.a,{position:"sticky",children:Object(S.jsx)(y.a,{children:Object(S.jsx)(f.a,{variant:"h5",onClick:function(){n.push("/")},children:e.children})})}),Object(S.jsx)(g.a,{children:Object(S.jsx)(N.a,{value:e.tabSelected,children:e.tabItems.map((function(e){return Object(S.jsx)(C.a,{label:e.label,disabled:e.disabled,onClick:e.onClick},e.label)}))})})]})},F=t(436),I=t(448),D=function(){return Object(S.jsx)(F.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:!0,children:Object(S.jsx)(I.a,{color:"inherit"})})},A=t(13),T=t(20),E=t(432),M=t(431),R=function(e){var n,t=Object(o.forwardRef)((function(e,n){return Object(S.jsx)(M.a,Object(T.a)({elevation:6,ref:n,variant:"filled"},e))})),a=Object(o.useState)(!!e.error),i=Object(A.a)(a,2),c=i[0],r=i[1],s=function(e,n){"clickaway"!==n&&r(!1)};return Object(S.jsx)(E.a,{open:c,onClose:s,children:Object(S.jsx)(t,{onClose:s,severity:"error",sx:{width:"100%"},children:null===(n=e.error)||void 0===n?void 0:n.message})})},V=j.d.div(a||(a=Object(v.a)(["\n  margin-top: 1ex;\n  margin-left: 1vw;\n  margin-right: 3vw;\n"]))),B=function(e){return Object(S.jsxs)(S.Fragment,{children:[e.loading&&Object(S.jsx)(D,{}),e.error&&Object(S.jsx)(R,{error:e.error}),Object(S.jsx)(w,{tabItems:e.tabItems,tabSelected:e.tabSelected,children:"QuickRoic"}),Object(S.jsx)(V,{children:e.children})]})},P=t(416),z=t(84),Y=t(61),L=Object(z.c)([]),_=Object(z.c)(!1),U=Object(z.c)([]),Q={Query:{fields:{localCompanyData:{read:function(){return L()}}}}},W=Object(Y.d)(i||(i=Object(v.a)(["\n  extend type Query {\n    localCompanyData: [CompanyData!]!\n  }\n"]))),G=function(){var e=Object(P.a)(_),n=h(e);return Object(S.jsxs)(B,{tabItems:n,tabSelected:0,children:[Object(S.jsx)(f.a,{variant:"h4",component:"h2",children:"QuickRoic\u3068\u306f"}),Object(S.jsx)("p",{children:"SPEEDA\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30c7\u30fc\u30bf\u3092\u5143\u306bROIC\u5206\u6790\u3092\u7c21\u5358\u306b\u884c\u3046\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067ROIC\u30c4\u30ea\u30fc\u306a\u3069\u306e\u5206\u6790\u7d50\u679c\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u5206\u6790\u7d50\u679c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u8cc7\u6599\u306b\u4f7f\u3063\u305f\u308a\u3001CSV\u3067\u51fa\u529b\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u3067\u3055\u3089\u306a\u308b\u5206\u6790\u3092\u884c\u3046\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059"}),Object(S.jsx)(f.a,{variant:"h4",component:"h2",children:"\u4f7f\u3044\u65b9"}),Object(S.jsx)("p",{children:"To Be Written."}),Object(S.jsx)(f.a,{variant:"h4",component:"h2",children:"\u7559\u610f\u4e8b\u9805"}),Object(S.jsx)("p",{children:"\u3042\u304f\u307e\u3067\u79c1\u7684\u306b\u958b\u767a\u3057\u3066\u79c1\u7684\u306b\u904b\u7528\u3057\u3066\u3044\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\uff08\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306b\u904b\u7528\u3057\u3088\u3046\u3068\u3068\u601d\u3046\u3068\u8af8\u3005\u306e\u5be9\u67fb\u30fb\u7533\u8acb\u304c\u6b7b\u306c\u307b\u3069\u9762\u5012\u306a\u306e\u3067\u30fb\u30fb\u30fb\uff09\u4ee5\u4e0b\u306e\u7559\u610f\u4e8b\u9805\u3092\u7406\u89e3\u3057\u3066\u3054\u4f7f\u7528\u304f\u3060\u3055\u3044\u3002"}),Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:["\u7d50\u679c\u306e\u6b63\u78ba\u6027\u30fb\u5b8c\u5168\u6027\u306b\u3064\u3044\u3066\u306f\u4fdd\u969c\u3067\u304d\u307e\u305b\u3093\u3002\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306b\u3064\u3044\u3066\u306f\u3001",Object(S.jsx)("a",{href:"https://github.com/ku-mok/QuickRoic",children:"\u30b3\u30fc\u30c9\u30ec\u30dd\u30b8\u30c8\u30ea"}),"\u306esample_cases\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3092\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002InputSpeedFile.xlsx\u3092\u5143\u3068\u3057\u3066\u3001 \u6574\u5f62\u3055\u308c\u305f\u3082\u306e\u304c DataframeExpected.xlsx ROIC\u8a08\u7b97\u307e\u3067\u884c\u3063\u305f\u3082\u306e\u304c RoicExpected.xlsx\u3067\u3059\u3002\u30b3\u30fc\u30dd\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30ca\u30f3\u30b9\u5f37\u3044\u65b9\u306e\u691c\u7b97\u3092\u304a\u5f85\u3061\u3057\u3066\u304a\u308a\u307e\u3059\u3002"]}),Object(S.jsxs)("li",{children:["\u5fc5\u8981\u306a\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u63aa\u7f6e\uff08\u901a\u4fe1\u7d4c\u8def\u306e\u6697\u53f7\u5316\u3084\u30b5\u30fc\u30d0\u3078\u306e\u4fb5\u5165\u9632\u6b62\u3001\u9001\u4fe1\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306f\u51e6\u7406\u5f8c\u3059\u3050\u306b\u524a\u9664\u3059\u308b\u306a\u3069\uff09\u306f\u884c\u3063\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5be9\u67fb\u3082\u901a\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001",Object(S.jsx)("strong",{children:"\u975e\u4e0a\u5834\u4f01\u696d\u306e\u8ca1\u52d9\u8af8\u8868\u3084\u4e8b\u696d\u5225\u8ca1\u52d9\u8af8\u8868\u306a\u3069\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u60c5\u5831\u3092\u542b\u3080\u30c7\u30fc\u30bf\u3092 SPEEDA\u306e\u5f62\u5f0f\u306b\u4e57\u305b\u63db\u3048\u3066 \u7d76\u5bfe\u306b\u9001\u4fe1\u3059\u308b\u884c\u70ba\u306f\u7d76\u5bfe\u306b\u884c\u308f\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002"})]}),Object(S.jsx)("li",{children:"(\u6280\u8853\u7684\u88dc\u8db3)\u9001\u4fe1\u3055\u308c\u305fExcel\u30d5\u30a1\u30a4\u30eb\u306f\u8aad\u307f\u53d6\u308a\u5f8c\u5373\u5ea7\u306b\u524a\u9664\u3055\u308c\u307e\u3059\u3002\u30b5\u30fc\u30d0\u5074\u304c\u5b8c\u5168\u306b\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\u3067\u8aad\u307f\u53d6\u308a\u7d50\u679c\u3082\u30b5\u30fc\u30d0\u5074\u306b\u306f\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u305b\u3093\uff08\u5206\u6790\u306e\u305f\u3073\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u9001\u4fe1\u3055\u308c\u3066\u3044\u307e\u3059\uff09\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u9001\u4fe1\u3055\u308c\u308b\u60c5\u5831\u306fHTTPS\u901a\u4fe1\u306b\u3088\u308a\u6697\u53f7\u5316\u3055\u308c\u3066\u304a\u308a\u3001\u4e00\u822c\u306b\u76d7\u8074\u306f\u975e\u5e38\u306b\u56f0\u96e3\u3067\u3059\u3002\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306b\u3066TLS\u7d42\u7aef\u51e6\u7406\u3092\u884c\u3046\u305f\u3081\u3001\u4e0a\u7530\u306e\u5bb6\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306eLAN\u5185\u901a\u4fe1\uff08\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7-\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u9593\uff09\u306f\u5e73\u6587\u901a\u4fe1\u3067\u3059\u3002\u3057\u305f\u304c\u3063\u3066\u3001\u306a\u3093\u3089\u304b\u306e\u653b\u6483\u8005\u306b\u3088\u308a\u4e0a\u7530\u306e\u5bb6\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u4fb5\u5165\u3092\u8a31\u3057\u3066\u3044\u305f\u5834\u5408\u3001\u60c5\u5831\u306f\u6d41\u51fa\u3057\u307e\u3059\u3002"}),Object(S.jsx)("li",{children:"\u4ed5\u69d8\u306e\u8aa4\u308a\u30fb\u52d5\u4f5c\u306e\u30d0\u30b0\u306a\u3069\u3092\u898b\u3064\u3051\u3089\u308c\u305f\u65b9\u306f\u9023\u7d61\u3092\u304f\u3060\u3055\u3044"}),Object(S.jsx)("li",{children:"\u6a5f\u80fd\u306e\u8ffd\u52a0\u8981\u671b\u306a\u3069\u306f\u8a00\u3063\u3066\u304f\u308c\u308c\u3070\u5bfe\u5fdc\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093"}),Object(S.jsx)("li",{children:"\u30b3\u30fc\u30c9\u304c\u66f8\u3051\u308b\u4eba\u306f\u81ea\u5206\u3067\u66f8\u3044\u3066\u30d7\u30eb\u30ea\u30af\u9001\u308b\u3068\u30ec\u30d3\u30e5\u30fc\u306e\u4e0a\u30de\u30fc\u30b8\u3057\u307e\u3059"}),Object(S.jsx)("li",{children:"UI\u304c\u30c0\u30b5\u3044\u306e\u306f\u4e0a\u7530\u306e\u30bb\u30f3\u30b9\u306e\u554f\u984c\u3067\u3059\u3002\u6c17\u306b\u5165\u3089\u306a\u3044\u4eba\u304c\u3044\u305f\u3089\u30c7\u30b6\u30a4\u30f3\u3092\u304f\u3060\u3055\u3044\u3002"})]})]})},J=t(85),q=t.n(J),H=t(128),K=t(17),X=t(59),Z=t(441),$=t(450),ee=function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)($.a,{variant:"contained",color:e.successText?"success":e.errorText?"error":"primary",disabled:e.disable||e.loading,onClick:e.handleButtonClick,fullWidth:!0,children:[e.loading&&Object(S.jsx)(I.a,{size:24}),!e.loading&&!e.successText&&!e.errorText&&e.children,e.successText,e.errorText]})})},ne=t(222),te=Object(j.d)(g.a)(c||(c=Object(v.a)(["\n  height: 50vh;\n  margin: 1ex auto;\n"]))),ae=j.d.div(r||(r=Object(v.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]))),ie=function(e){var n=Object(ne.a)({accept:".xlsx",onDropAccepted:function(n){return e.setAcceptedFiles(n)}}),t=n.getRootProps,a=n.getInputProps,i=t(),c=i.ref,r=Object(X.a)(i,["ref"]);return Object(S.jsx)("div",{ref:c,children:Object(S.jsxs)(te,Object(T.a)(Object(T.a)({},r),{},{elevation:3,children:[Object(S.jsx)("input",Object(T.a)(Object(T.a)({},a()),{},{"data-testid":"dropzone"})),0===e.acceptedFiles.length?Object(S.jsx)(ae,{children:"\u5206\u6790\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c9\u30e9\u30c3\u30b0\u30a2\u30f3\u30c9\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u304b\u30af\u30ea\u30c3\u30af\u3057\u3066\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"}):Object(S.jsx)(ae,{children:Object(S.jsx)("ol",{children:e.acceptedFiles.map((function(e){return Object(S.jsx)("li",{children:e.name},e.name)}))})})]}))})},ce=function(e){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ie,{acceptedFiles:e.acceptedFiles,setAcceptedFiles:e.setAcceptedFiles}),Object(S.jsx)(ee,{successText:e.successText,errorText:e.errorText,loading:e.loading,disable:0===e.acceptedFiles.length,handleButtonClick:e.handleUpload,children:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u5206\u6790\u3092\u5b9f\u65bd"})]})},re={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadExcel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"files"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uploadSpeedaExcel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"files"},value:{kind:"Variable",name:{kind:"Name",value:"files"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"companyData"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"companyName"}},{kind:"Field",name:{kind:"Name",value:"metrics"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metricsName"}},{kind:"Field",name:{kind:"Name",value:"metricsValues"}},{kind:"Field",name:{kind:"Name",value:"metricsYears"}}]}}]}}]}}]}}]},oe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetLocalData"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localCompanyData"},directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"companyName"}},{kind:"Field",name:{kind:"Name",value:"metrics"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metricsName"}},{kind:"Field",name:{kind:"Name",value:"metricsValues"}},{kind:"Field",name:{kind:"Name",value:"metricsYears"}}]}}]}}]}}]},se={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"calcRoicWacc"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"CompanyDataInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"calcDrivers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"companyName"}},{kind:"Field",name:{kind:"Name",value:"metrics"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metricsName"}},{kind:"Field",name:{kind:"Name",value:"metricsValues"}},{kind:"Field",name:{kind:"Name",value:"metricsYears"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"calcRoic"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"companyName"}},{kind:"Field",name:{kind:"Name",value:"metrics"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metricsName"}},{kind:"Field",name:{kind:"Name",value:"metricsValues"}},{kind:"Field",name:{kind:"Name",value:"metricsYears"}}]}}]}}]}}]},le=function(e){var n=Object(P.a)(_),t=h(n);return Object(S.jsx)(B,{tabItems:t,tabSelected:1,children:Object(S.jsx)(ce,Object(T.a)({},e))})},de=function(){var e,n,t=Object(o.useState)([]),a=Object(A.a)(t,2),i=a[0],c=a[1],r=Object(m.f)(),s=Object(Z.a)(re,{onCompleted:function(e){var n,t=null===(n=e.uploadSpeedaExcel)||void 0===n?void 0:n.companyData.map((function(e){e.__typename;var n=Object(X.a)(e,["__typename"]),t=e.metrics,a=(t.__typename,Object(X.a)(t,["__typename"]));return n.metrics=a,n}));L(t),_(!0);var a=["#4E79A7","#A0CBE8","#F28E2B","#FFBE7D","#59A14F","#8CD17D","#B6992D","#F1CE63","#499894","#86BCB6","#E15759","#FF9D9A","#79706E","#BAB0AC","#D37295","#FABFD2","#B07AA1","#D4A6C8","#9d7660","#D7B5A6"];U(Object(K.a)(new Set(null===t||void 0===t?void 0:t.map((function(e){return e.companyName})))).map((function(e,n){return{name:e,visibility:!0,color:a[n%a.length]}}))),console.info(t),window.setTimeout((function(){return r.push("/table")}),800)},onError:function(e){console.error(e.message)}}),l=Object(A.a)(s,2),d=l[0],u=l[1],j=u.data,b=u.loading,x=u.error,O=function(){var e=Object(H.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({variables:{files:i}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(le,{acceptedFiles:i,setAcceptedFiles:c,handleUpload:O,successText:!x&&j?"".concat(new Set(null===j||void 0===j||null===(e=j.uploadSpeedaExcel)||void 0===e||null===(n=e.companyData)||void 0===n?void 0:n.map((function(e){return e.companyName}))).size,"\u793e\u306e\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u53d6\u308a\u307e\u3057\u305f\u3002\u30c7\u30fc\u30bf\u78ba\u8a8d\u753b\u9762\u306b\u9077\u79fb\u3057\u307e\u3059\u3002"):void 0,loading:b,errorText:x?"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f(".concat(x.message,")\u3002\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u306e\u4e0a\u89e3\u6c7a\u3057\u306a\u3044\u5834\u5408\u306f\u9023\u7d61\u3092\u304f\u3060\u3055\u3044\u3002"):void 0})},ue=function(){var e=Object(o.useState)(!1),n=Object(A.a)(e,2),t=n[0],a=n[1];return{modalOpen:t,handleModalOpen:function(){return a(!0)},handleModalClose:function(){return a(!1)}}},me=t(433),je=function(e){var n=Object(o.useState)([]),t=Object(A.a)(n,2),a=t[0],i=t[1];Object(me.a)(oe,{onCompleted:function(){var n=Object(H.a)(q.a.mark((function n(t){var a;return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.localCompanyData,i(a),n.next=4,r({data:a});case 4:e&&e(a);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});var c=Object(me.a)(se,{variables:{data:[]},onCompleted:function(e){i((function(n){return[].concat(Object(K.a)(n),Object(K.a)(e.calcRoic),Object(K.a)(e.calcDrivers)).sort((function(e,n){return e.companyName===n.companyName?0:e.companyName>n.companyName?1:-1}))}))},onError:function(e){return console.error(e)}}),r=c.refetch;return{data:a,loading:c.loading,error:c.error}},be=t(223),xe=t(214),Oe=t.n(xe),pe=t(6);function fe(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,t=["\u4f01\u696d\u540d\u79f0","\u5e74\u5ea6"].concat(Object(K.a)(new Set(e.map((function(e){return e.metrics.metricsName}))))).map((function(e){return{key:e,name:e}}));return n?t.filter((function(e){return!Object(K.a)(n).includes(e.key)})):t}function he(e,n,t,a,i){var c=Object(K.a)(new Set(e.map((function(e){return e.companyName})))),r=e.filter((function(e){return e.metrics.metricsName===n})).reduce((function(e,n){return e.set(n.companyName,n.metrics.metricsValues[a])}),new Map),o=e.filter((function(e){return e.metrics.metricsName===t})).reduce((function(e,n){return e.set(n.companyName,n.metrics.metricsValues[a])}),new Map);return c.map((function(e){return{x:[r.get(e)],y:[o.get(e)],type:"scatter",mode:"text+markers",name:e,text:e,textposition:"top center",marker:{size:15,color:i[e]}}}))}var ve,ke,ye,ge=t(419),Ne=t(420),Ce=t(417),Se=t(418),we=t(429),Fe=t(451),Ie=t(430),De=t(452),Ae=t(453),Te=j.d.div(ve||(ve=Object(v.a)(["\n  background-color: white;\n  position: absolute;\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -30%);\n  width: 50%;\n  max-height: 50%;\n  overflow: scroll;\n"]))),Ee=j.d.div(ke||(ke=Object(v.a)(["\n  display: flex;\n  column-gap: 10px;\n  align-items: center;\n"]))),Me=function(e){var n=Object(o.useCallback)((function(){e.handleFilterChange(e.columns)}),[e]),t=Object(o.useCallback)((function(){e.handleFilterChange([])}),[e]);return Object(S.jsx)(we.a,{open:e.open,onClose:e.onClose,children:Object(S.jsxs)(Te,{children:[Object(S.jsxs)(Ee,{children:[Object(S.jsx)(f.a,{children:"\u8868\u793a\u3059\u308b\u30ab\u30e9\u30e0\u3092\u9078\u629e"}),Object(S.jsx)($.a,{variant:"contained",onClick:t,children:"\u5168\u9078\u629e"}),Object(S.jsx)($.a,{variant:"contained",onClick:n,children:"\u5168\u89e3\u9664"})]}),Object(S.jsx)(Fe.a,{children:e.columns.map((function(n){return Object(S.jsxs)(Ie.a,{onClick:function(t){return e.handleFilterChange(n)},children:[Object(S.jsx)(De.a,{children:e.filter&&e.filter.includes(n)?Object(S.jsx)(Ce.a,{}):Object(S.jsx)(Se.a,{})}),Object(S.jsx)(Ae.a,{primary:n})]},n)}))})]})})};var Re=j.d.div(ye||(ye=Object(v.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin: 10px 0;\n  column-gap: 10px;\n"]))),Ve=function(){var e=h(),n=je((function(e){return j(new Set(e.map((function(e){return e.companyName}))))})),t=n.data,a=n.loading,i=n.error,c=ue(),r=c.modalOpen,s=c.handleModalOpen,l=c.handleModalClose,d=Object(o.useState)(new Set),u=Object(A.a)(d,2),m=u[0],j=u[1],b=Object(o.useMemo)((function(){return function(e){var n=new Map(Object(K.a)(new Set(e.flatMap((function(e){return e.metrics.metricsYears.reduce((function(n,t){return[].concat(Object(K.a)(n),[JSON.stringify({year:t,companyName:e.companyName})])}),[])})))).map((function(e){return[e,[]]})));e.forEach((function(e){return e.metrics.metricsYears.forEach((function(t,a){var i;null===(i=n.get(JSON.stringify({year:t,companyName:e.companyName})))||void 0===i||i.push(Object(pe.a)({},e.metrics.metricsName,e.metrics.metricsValues[a]))}))}));var t=[];return n.forEach((function(e,n){var a=e.reduce((function(e,n){return Object.assign(e,n)}),{}),i=JSON.parse(n);Object.assign(a,{"\u4f01\u696d\u540d\u79f0":i.companyName,"\u5e74\u5ea6":i.year}),t.push(a)})),t}(t)}),[t]),x=Object(o.useMemo)((function(){return fe(t).filter((function(e){return"\u4f01\u696d\u540d\u79f0"!==e.key&&"\u5e74\u5ea6"!==e.key}))}),[t]),O=Object(o.useState)(),p=Object(A.a)(O,2),f=p[0],v=p[1],k=Object(o.useMemo)((function(){return fe(t,f)}),[f,t]);return Object(S.jsxs)(B,{tabItems:e,tabSelected:2,loading:a,error:i,children:[Object(S.jsx)(Me,{handleFilterChange:function(e){v("string"===typeof e?function(n){return n?n.includes(e)?n.filter((function(n){return n!==e})):[].concat(Object(K.a)(n),[e]):[e]}:e)},open:r,columns:x.map((function(e){return e.name})),filter:f,onClose:l}),Object(S.jsxs)(Re,{children:[Object(S.jsx)($.a,{startIcon:Object(S.jsx)(ge.a,{}),variant:"contained",color:"secondary",onClick:s,children:"\u8868\u793a\u30ab\u30e9\u30e0\u306e\u8a2d\u5b9a"}),Object(S.jsx)($.a,{startIcon:Object(S.jsx)(Ne.a,{}),variant:"contained",onClick:function(){var e=function(e,n){return[n.map((function(e){return e.key})).join(",")].concat(Object(K.a)(e.map((function(e){return n.reduce((function(n,t){return n+(e[t.key]+",")}),"").slice(0,-1)})))).join("\n")}(b,k),n=new Uint8Array([239,187,191]),t=new Blob([n,e],{type:"text/csv"}),a=window.URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download="QuickRoicOutput.csv",i.click(),i.remove()},children:"Download As CSV"})]}),Object(S.jsx)(be.a,{rows:b,columns:k,style:{height:"75vh"},groupBy:["\u4f01\u696d\u540d\u79f0"],rowGrouper:Oe.a,className:"rdg-light",expandedGroupIds:m,onExpandedGroupIdsChange:j,defaultColumnOptions:{resizable:!0}})]})},Be=t(97),Pe=t.n(Be),ze=t(437),Ye=t(438),Le=t(454),_e=t(449),Ue=t(421),Qe=t(422),We=function(){var e=h(),n=Object(o.useState)(0),t=Object(A.a)(n,2),a=t[0],i=t[1],c=function(e,n){var t=Object(o.useState)(!1),a=Object(A.a)(t,2),i=a[0],c=a[1],r=Object(o.useState)(void 0),s=Object(A.a)(r,2),l=s[0],d=s[1],u=Object(o.useCallback)((function(){if(!i){var t=window.setInterval(e,n);c(!0),d(t)}}),[e,n,i]),m=Object(o.useCallback)((function(){window.clearInterval(l),c(!1),d(void 0)}),[l]),j=Object(o.useCallback)((function(){i?m():u()}),[i,u,m]);return{isActive:i,startInterval:u,stopInterval:m,toggleInterval:j}}((function(){i((function(e){return e===d[0].metrics.metricsYears.length-2?0:e+1}))}),1e3),r=c.isActive,s=c.toggleInterval,l=je((function(e){i(e[0].metrics.metricsYears.length-2)})),d=l.data,u=l.loading,m=l.error,j=Object(P.a)(U),b=Object(o.useMemo)((function(){return j.reduce((function(e,n){return Object.assign(e,Object(pe.a)({},n.name,n.color))}),{})}),[j]),x=Object(o.useMemo)((function(){return j.reduce((function(e,n){return Object.assign(e,Object(pe.a)({},n.name,n.visibility))}),{})}),[j]),O=Object(o.useMemo)((function(){return he(d.filter((function(e){return x[e.companyName]})),"ROIC","WACC",a,b)}),[b,x,d,a]),p=Object(o.useMemo)((function(){return he(d.filter((function(e){return x[e.companyName]})),"NOPAT\u30de\u30fc\u30b8\u30f3","\u6295\u4e0b\u8cc7\u672c\u56de\u8ee2\u7387",a,b)}),[b,x,d,a]),v={display:"flex",justifyContent:"center"};return Object(S.jsx)(B,{tabItems:e,tabSelected:3,loading:u,error:m,children:d&&d.length>0&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(ze.a,{container:!0,sx:v,children:[Object(S.jsx)(ze.a,{item:!0,md:6,sm:12,sx:v,children:Object(S.jsx)(Pe.a,{data:O,layout:{showlegend:!1,title:{text:"WACC-ROIC\u30d7\u30ed\u30c3\u30c8"},xaxis:{title:"ROIC",rangemode:"tozero",tickformat:",.1%"},yaxis:{title:"WACC",rangemode:"tozero",tickformat:",.1%"},shapes:[{type:"line",x0:0,y0:0,x1:.2,y1:.2,xref:"x",yref:"y",line:{width:1,dash:"dot"}}]}})}),Object(S.jsx)(ze.a,{item:!0,md:6,sm:12,sx:v,children:Object(S.jsx)(Pe.a,{data:p,layout:{showlegend:!1,title:{text:"NOPAT\u30de\u30fc\u30b8\u30f3-\u6295\u4e0b\u8cc7\u672c\u56de\u8ee2\u7387\u30d7\u30ed\u30c3\u30c8"},xaxis:{title:"NOPAT\u30de\u30fc\u30b8\u30f3",rangemode:"tozero",tickformat:",.1%"},yaxis:{title:"\u6295\u4e0b\u8cc7\u672c\u56de\u8ee2\u7387",rangemode:"tozero",tickformat:",.1%"}}})})]}),Object(S.jsxs)(ze.a,{container:!0,sx:{columnGap:2,alignItems:"center"},children:[Object(S.jsx)(f.a,{variant:"body1",sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:"\u8868\u793a\u5e74\u5ea6"}),Object(S.jsx)(Ye.a,{color:"primary",value:d[0].metrics.metricsYears[a+1],children:d[0].metrics.metricsYears.filter((function(e,n){return 0!==n})).map((function(e,n){return Object(S.jsx)(Le.a,{value:e,onClick:function(){i(n)},children:e},e)}))}),Object(S.jsx)(_e.a,{color:"primary",onClick:function(){return s()},children:r?Object(S.jsx)(Ue.a,{}):Object(S.jsx)(Qe.a,{})})]})]})})},Ge=function(){var e=h(),n=je(),t=n.data,a=n.loading,i=n.error,c=Object(P.a)(U),r=Object(o.useMemo)((function(){return c.reduce((function(e,n){return Object.assign(e,Object(pe.a)({},n.name,n.color))}),{})}),[c]),s=Object(o.useMemo)((function(){return c.reduce((function(e,n){return Object.assign(e,Object(pe.a)({},n.name,n.visibility))}),{})}),[c]),l=Object(o.useMemo)((function(){return function(e,n){var t={ROIC:{xaxis:"x",yaxis:"y"},"\u6295\u4e0b\u8cc7\u672c\u56de\u8ee2\u7387":{xaxis:"x2",yaxis:"y2"},"NOPAT\u30de\u30fc\u30b8\u30f3":{xaxis:"x2",yaxis:"y3"},"\u56fa\u5b9a\u8cc7\u7523\u56de\u8ee2\u7387":{xaxis:"x3",yaxis:"y4"},"\u904b\u8ee2\u8cc7\u672c\u56de\u8ee2\u7387":{xaxis:"x3",yaxis:"y5"},"\u8ca9\u7ba1\u8cbb\u7387":{xaxis:"x3",yaxis:"y6"},"\u58f2\u4e0a\u539f\u4fa1\u7387":{xaxis:"x3",yaxis:"y7"}};return["ROIC","\u6295\u4e0b\u8cc7\u672c\u56de\u8ee2\u7387","NOPAT\u30de\u30fc\u30b8\u30f3","\u56fa\u5b9a\u8cc7\u7523\u56de\u8ee2\u7387","\u904b\u8ee2\u8cc7\u672c\u56de\u8ee2\u7387","\u8ca9\u7ba1\u8cbb\u7387","\u58f2\u4e0a\u539f\u4fa1\u7387"].flatMap((function(a){return e.filter((function(e){return e.metrics.metricsName===a})).map((function(e){return{x:e.metrics.metricsYears,y:e.metrics.metricsValues,type:"scatter",mode:"lines+markers",xaxis:t[e.metrics.metricsName].xaxis,yaxis:t[e.metrics.metricsName].yaxis,marker:{color:n[e.companyName]}}}))}))}(t.filter((function(e){return s[e.companyName]})),r)}),[r,s,t]);return Object(S.jsx)(B,{tabItems:e,tabSelected:4,loading:a,error:i,children:t&&Object(S.jsx)(Pe.a,{style:{width:"100%",height:"80vh"},data:l,layout:{annotations:[{text:"ROIC",showarrow:!1,align:"center",x:.135,y:1.1,xref:"paper",yref:"paper"},{text:"NOPAT\u30de\u30fc\u30b8\u30f3",showarrow:!1,align:"center",x:.5,y:1.1,xref:"paper",yref:"paper"},{text:"\u6295\u4e0b\u8cc7\u672c\u56de\u8ee2\u7387",showarrow:!1,align:"center",x:.5,y:.5,xref:"paper",yref:"paper"},{text:"\u58f2\u4e0a\u539f\u4fa1\u7387",showarrow:!1,x:.868,y:1.1,xref:"paper",yref:"paper"},{text:"\u8ca9\u7ba1\u8cbb\u7387",showarrow:!1,x:.865,y:.82,xref:"paper",yref:"paper"},{text:"\u904b\u8ee2\u8cc7\u672c\u56de\u8ee2\u7387",showarrow:!1,align:"center",x:.88,y:.5,xref:"paper",yref:"paper"},{text:"\u56fa\u5b9a\u8cc7\u7523\u56de\u8ee2\u7387",showarrow:!1,align:"center",x:.88,y:.2,xref:"paper",yref:"paper"}],xaxis:{domain:[0,.3],anchor:"y"},xaxis2:{domain:[.35,.65],anchor:"y2"},xaxis3:{domain:[.7,1],anchor:"y4"},yaxis:{domain:[0,1],tickformat:",.0%",anchor:"x"},yaxis2:{domain:[0,.45],anchor:"x2"},yaxis3:{domain:[.55,1],tickformat:",.0%",anchor:"x2"},yaxis4:{domain:[0,.175],anchor:"x3"},yaxis5:{domain:[.275,.45],anchor:"x3"},yaxis6:{domain:[.585,.76],tickformat:",.0%",anchor:"x3"},yaxis7:{domain:[.825,1],tickformat:",.0%",anchor:"x3"},showlegend:!1},config:{responsive:!1}})})},Je=t(423),qe=t(424),He=t(439),Ke=t(220);var Xe=function(e){var n=ue(),t=n.modalOpen,a=n.handleModalOpen,i=n.handleModalClose,c=Object(o.useState)("#ffffff"),r=Object(A.a)(c,2),s=r[0],l=r[1],d=Object(o.useState)(0),u=Object(A.a)(d,2),m=u[0],j=u[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Fe.a,{children:e.companies.map((function(e,n){return Object(S.jsx)(Ie.a,{children:Object(S.jsx)(He.a,{label:e.name,onClick:function(){a(),l(e.color),j(n)},onDelete:function(){return e.setVisibility(!e.visibility)},deleteIcon:e.visibility?Object(S.jsx)(Je.a,{}):Object(S.jsx)(qe.a,{}),sx:{background:e.visibility?e.color:"silver",color:e.visibility?(t=e.color,(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3<128?"white":"black"):"black"}})},e.name);var t}))}),Object(S.jsx)(we.a,{open:t,onClose:i,children:Object(S.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(S.jsx)(Ke.a,{color:s,onChange:function(n,t){l(n.hex),e.companies[m].setColor(n.hex)}})})})]})},Ze=function(){var e=h(!0),n=function(){var e=Object(P.a)(U);return Object(o.useMemo)((function(){return e.map((function(n,t){return Object(T.a)({setColor:function(a){U([].concat(Object(K.a)(e.slice(0,t)),[Object(T.a)(Object(T.a)({},n),{},{color:a})],Object(K.a)(t===e.length-1?[]:e.slice(t+1))))},setVisibility:function(a){U([].concat(Object(K.a)(e.slice(0,t)),[Object(T.a)(Object(T.a)({},n),{},{visibility:a})],Object(K.a)(t===e.length-1?[]:e.slice(t+1))))}},n)}))}),[e])}();return Object(S.jsxs)(B,{tabItems:e,tabSelected:5,children:[Object(S.jsx)(f.a,{variant:"h6",children:"\u4f01\u696d\u306e\u8868\u793a\u8a2d\u5b9a"}),Object(S.jsx)(Xe,{companies:n})]})},$e=function(e){return Object(S.jsx)(u.a,{basename:"/QuickROIC",children:Object(S.jsx)(b.a,{injectFirst:!0,children:Object(S.jsx)(x.a,{theme:p,children:Object(S.jsx)(j.b,{theme:p,children:e.children})})})})},en=[{path:"/",component:Object(S.jsx)(G,{})},{path:"/new",component:Object(S.jsx)(de,{})},{path:"/table",component:Object(S.jsx)(Ve,{})},{path:"/scatter",component:Object(S.jsx)(We,{})},{path:"/tree",component:Object(S.jsx)(Ge,{})},{path:"/setting",component:Object(S.jsx)(Ze,{})}];var nn=function(){return Object(S.jsx)($e,{children:Object(S.jsx)(m.c,{children:en.map((function(e){return Object(S.jsx)(m.a,{path:e.path,exact:!0,children:e.component})}))})})},tn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,456)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,c=n.getLCP,r=n.getTTFB;t(e),a(e),i(e),c(e),r(e)}))},an=(t(363),t(159)),cn=t(434),rn=t(426),on=t(425),sn=t.n(on)()({uri:"roic.mksyn.net/graphql"}),ln=new an.a({link:sn,typeDefs:W,cache:new cn.a({typePolicies:Q})});d.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(rn.a,{client:ln,children:Object(S.jsx)(nn,{})})}),document.getElementById("root")),tn()}},[[374,1,2]]]);
//# sourceMappingURL=main.ac8b5025.chunk.js.map